(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{351:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,j:()=>o.A});var s=r(8448),a=r(2115);let l=()=>{let e=(0,a.useContext)(s.c);if(!e)throw Error("useAuth must be used within a AuthProvider");return{...e}};var o=r(6640)},411:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var s=r(5155),a=r(2115),l=r(6725),o=r(814),n=r(1407),i=r(351);function c(e){let{children:t}=e,{user:r}=(0,i.A)(),[c,d]=(0,a.useState)(),[u,m]=(0,a.useState)(""),[h,f]=(0,a.useState)(""),[y,g]=(0,a.useState)(""),[p,v]=(0,a.useState)(""),[b,w]=(0,a.useState)(""),[x,S]=(0,a.useState)(""),[k,E]=(0,a.useState)(!1),[P,_]=(0,a.useState)(!1),j=async e=>{E(!0);try{if(!e){o.o.error("Please upload an image");return}let s=new FormData;s.append("image",e);let a=await fetch("https://api.imgbb.com/1/upload?key=".concat("846957b3b46ff7372ebe1ae684b843d4"),{method:"POST",body:s}),l=await a.json();if(console.log("API Response:",l),l.success){var t,r;let e=l.data;d(e),m(e.display_url||""),f((null===(t=e.thumb)||void 0===t?void 0:t.url)||""),g((null===(r=e.medium)||void 0===r?void 0:r.url)||""),v(e.delete_url||""),_(!0),window.scrollTo({top:500,behavior:"smooth"})}else o.o.error("Failed to upload image. Please try again."),console.error("Upload failed:",l);console.log(c)}catch(e){console.error("Error during image upload:",e.message),o.o.error("Error converting image",{description:e.message})}finally{E(!1)}},L='<a href="'.concat(u,'" target="_blank"><img src="').concat(u,'" alt="Image" /></a>'),C='<img src="'.concat(u,'" alt="Image" />'),T=async()=>{var e;if(!r){o.o.error("Please login to save your image");return}if(!c){o.o.error("Please generate a url first");return}E(!0);let t={id:null==c?void 0:c.id,user_id:null==r?void 0:r.$id,url:null==c?void 0:c.url,displayUrl:null==c?void 0:c.display_url,thumbnailUrl:null==c?void 0:null===(e=c.thumb)||void 0===e?void 0:e.url,deleteUrl:null==c?void 0:c.delete_url,timestamp:new Date().toISOString(),filename:null==c?void 0:c.image.filename,size:"".concat(null==c?void 0:c.size," bytes")};try{await n.LL.createDocument(n.DB,n.Fu,n.ID.unique(),t),o.o.success("Image saved successfully",{description:"You can view it in your dashboard"})}catch(e){console.error(e.message),o.o.error("Error saving image",{description:e.message})}finally{E(!1)}};return(0,s.jsx)(l.$.Provider,{value:{url:u,setUrl:m,thumbnail:h,setThumbnail:f,medium:y,setMedium:g,deleteUrl:p,setDeleteUrl:v,anchorTag:L,generateUrl:j,isLoading:k,linkContent:b,htmlContent:x,handleSelectUrlType:e=>{console.log("Selected option:",e),"Original"===e?w(u):"Thumbnail"===e?w(h):"Medium"===e&&w(y)},handleSelectHtmlTag:e=>{console.log("Selected option:",e),"Image Tag"===e?S(C):"Anchor Tag"===e&&S(L)},handleSaveImage:T,imageData:c,setIsConverted:_,isConverted:P},children:t})}},1407:(e,t,r)=>{"use strict";r.d(t,{DB:()=>n,Fu:()=>c,ID:()=>s.ID,Jr:()=>i,LL:()=>o,ct:()=>l});var s=r(2484);let a=new s.Kj;a.setEndpoint("https://cloud.appwrite.io/v1").setProject("67c1b41d001491f10374");let l=new s.gD(a),o=new s.Lv(a),n="67c1b4c80029e6738f0d",i="67c66d39000e3e5be2ef",c="67c1b4fd00300a5ce5a0"},1873:(e,t,r)=>{"use strict";r.d(t,{default:()=>m});var s=r(5155);r(2115);var a=r(7401);let l=(0,a.A)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),o=(0,a.A)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);var n=r(7113),i=r(8173),c=r.n(i),d=r(351),u=r(814);let m=()=>{let{user:e,logout:t,isLoading:r}=(0,d.A)(),{theme:a,setTheme:i}=(0,n.D)();return(0,s.jsxs)("header",{className:"flex justify-between items-center p-4 border-b border-line sticky top-0 backdrop-blur-sm z-50",children:[(0,s.jsx)(c(),{href:"/",children:(0,s.jsx)("div",{className:"text-xl font-bold font-sora",children:"ImgGen"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c(),{href:"/uploads",className:"text-main font-medium md:px-4 px-1 py-2 flex items-center",children:"Uploads"}),(0,s.jsx)("button",{disabled:r,onClick:()=>{u.o.promise(t,{loading:"Logging out...",success:"Logged out successfully",error:"Failed to log out"})},className:" px-4 h-9 bg-primary font-sora text-sm font-medium text-primary-inverse rounded-md flex items-center",children:"Logout"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c(),{href:"/login",className:"text-main font-medium md:px-4 px-1 py-2 flex items-center",children:"Login"}),(0,s.jsx)(c(),{href:"/signup",className:"bg-primary font-sora text-sm font-medium text-primary-inverse rounded-md px-4 h-9 flex items-center",children:"Sign Up"})]}),(0,s.jsx)("button",{onClick:()=>{i("dark"===a?"light":"dark")},className:"h-10 w-10 flex items-center justify-center text-sub border-line border rounded-md p-1",children:"dark"===a?(0,s.jsx)(l,{className:"text-yellow-500",size:20}):(0,s.jsx)(o,{className:"text-gray-800",size:20})})]})]})}},2089:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,9324,23)),Promise.resolve().then(r.bind(r,5320)),Promise.resolve().then(r.bind(r,1873)),Promise.resolve().then(r.bind(r,8568)),Promise.resolve().then(r.bind(r,411)),Promise.resolve().then(r.t.bind(r,8173,23)),Promise.resolve().then(r.t.bind(r,9310,23)),Promise.resolve().then(r.t.bind(r,4691,23)),Promise.resolve().then(r.bind(r,814))},4691:e=>{e.exports={style:{fontFamily:"'Sora', 'Sora Fallback'",fontStyle:"normal"},className:"__className_c85093",variable:"__variable_c85093"}},5320:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var s=r(5155),a=r(7113);function l(e){let{children:t}=e;return(0,s.jsx)(a.N,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:t})}},6046:(e,t,r)=>{"use strict";var s=r(6658);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},6640:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(2115),a=r(6725);function l(){let e=(0,s.useContext)(a.$);if(!e)throw Error("useUrl must be used within a UrlProvider");return{...e}}},6725:(e,t,r)=>{"use strict";r.d(t,{$:()=>s});let s=(0,r(2115).createContext)(void 0)},7113:(e,t,r)=>{"use strict";r.d(t,{D:()=>d,N:()=>u});var s=r(2115),a=(e,t,r,s,a,l,o,n)=>{let i=document.documentElement,c=["light","dark"];function d(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,s=r&&l?a.map(e=>l[e]||e):a;r?(i.classList.remove(...s),i.classList.add(t)):i.setAttribute(e,t)}),r=t,n&&c.includes(r)&&(i.style.colorScheme=r)}if(s)d(s);else try{let e=localStorage.getItem(t)||r,s=o&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;d(s)}catch(e){}},l=["light","dark"],o="(prefers-color-scheme: dark)",n="undefined"==typeof window,i=s.createContext(void 0),c={setTheme:e=>{},themes:[]},d=()=>{var e;return null!=(e=s.useContext(i))?e:c},u=e=>s.useContext(i)?s.createElement(s.Fragment,null,e.children):s.createElement(h,{...e}),m=["light","dark"],h=e=>{let{forcedTheme:t,disableTransitionOnChange:r=!1,enableSystem:a=!0,enableColorScheme:n=!0,storageKey:c="theme",themes:d=m,defaultTheme:u=a?"system":"light",attribute:h="data-theme",value:v,children:b,nonce:w,scriptProps:x}=e,[S,k]=s.useState(()=>y(c,u)),[E,P]=s.useState(()=>y(c)),_=v?Object.values(v):d,j=s.useCallback(e=>{let t=e;if(!t)return;"system"===e&&a&&(t=p());let s=v?v[t]:t,o=r?g(w):null,i=document.documentElement,c=e=>{"class"===e?(i.classList.remove(..._),s&&i.classList.add(s)):e.startsWith("data-")&&(s?i.setAttribute(e,s):i.removeAttribute(e))};if(Array.isArray(h)?h.forEach(c):c(h),n){let e=l.includes(u)?u:null,r=l.includes(t)?t:e;i.style.colorScheme=r}null==o||o()},[w]),L=s.useCallback(e=>{let t="function"==typeof e?e(S):e;k(t);try{localStorage.setItem(c,t)}catch(e){}},[S]),C=s.useCallback(e=>{P(p(e)),"system"===S&&a&&!t&&j("system")},[S,t]);s.useEffect(()=>{let e=window.matchMedia(o);return e.addListener(C),C(e),()=>e.removeListener(C)},[C]),s.useEffect(()=>{let e=e=>{e.key===c&&(e.newValue?k(e.newValue):L(u))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[L]),s.useEffect(()=>{j(null!=t?t:S)},[t,S]);let T=s.useMemo(()=>({theme:S,setTheme:L,forcedTheme:t,resolvedTheme:"system"===S?E:S,themes:a?[...d,"system"]:d,systemTheme:a?E:void 0}),[S,L,t,E,a,d]);return s.createElement(i.Provider,{value:T},s.createElement(f,{forcedTheme:t,storageKey:c,attribute:h,enableSystem:a,enableColorScheme:n,defaultTheme:u,value:v,themes:d,nonce:w,scriptProps:x}),b)},f=s.memo(e=>{let{forcedTheme:t,storageKey:r,attribute:l,enableSystem:o,enableColorScheme:n,defaultTheme:i,value:c,themes:d,nonce:u,scriptProps:m}=e,h=JSON.stringify([l,r,i,t,d,c,o,n]).slice(1,-1);return s.createElement("script",{...m,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?u:"",dangerouslySetInnerHTML:{__html:"(".concat(a.toString(),")(").concat(h,")")}})}),y=(e,t)=>{let r;if(!n){try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t}},g=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},p=e=>(e||(e=window.matchMedia(o)),e.matches?"dark":"light")},8448:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});let s=(0,r(2115).createContext)(null)},8568:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var s=r(5155),a=r(2484),l=r(2115),o=r(8448),n=r(1407),i=r(6046),c=r(814);let d=e=>{let{children:t}=e,r=(0,i.useRouter)(),[d,u]=(0,l.useState)(null),[m,h]=(0,l.useState)(null),[f,y]=(0,l.useState)(!1),g=async e=>{y(!0);try{let t=await n.ct.create(a.ID.unique(),e.email,e.password,e.username);await n.ct.createEmailPasswordSession(e.email,e.password);let s=await n.ct.get();u(s),await b(t.name,t.email,t.$id),await w(t.$id),c.o.success("Account created successfully"),r.push("/")}catch(e){console.error(e),c.o.error(e.message)}finally{y(!1)}},p=async e=>{y(!0);try{await n.ct.createEmailPasswordSession(e.email,e.password);let t=await n.ct.get();u(t),await w(t.$id),c.o.success("Logged in successfully"),r.push("/")}catch(e){console.error(e),c.o.error(e.message)}finally{y(!1)}},v=async()=>{y(!0);try{await n.ct.deleteSession("current"),u(null),c.o.success("Logged out successfully"),r.push("/login")}catch(e){console.error(e),c.o.error(e.message)}finally{y(!1)}},b=async(e,t,r)=>{try{await n.LL.createDocument(n.DB,n.Jr,r,{userId:r,username:e,email:t})}catch(e){console.error(e),c.o.error(e.message)}},w=(0,l.useCallback)(async e=>{try{let t=await n.LL.getDocument(n.DB,n.Jr,e);h(t)}catch(e){console.error(e),c.o.error(e.message)}},[]);return(0,l.useEffect)(()=>{d&&w(d.$id)},[w,d]),(0,l.useEffect)(()=>{(async()=>{try{let e=await n.ct.get();u(e)}catch(e){console.error(e)}})()},[]),(0,s.jsx)(o.c.Provider,{value:{user:d,isLoading:f,signup:g,login:p,logout:v,userData:m},children:t})}},9310:e=>{e.exports={style:{fontFamily:"'Instrument Sans', 'Instrument Sans Fallback'",fontStyle:"normal"},className:"__className_6cc2af",variable:"__variable_6cc2af"}},9324:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[400,138,662,441,587,358],()=>t(2089)),_N_E=e.O()}]);